<script src="//maps.google.com/maps/api/js?key=AIzaSyD2Gwxfy4O60gWgPwTFIrIW8zkK_46gHCw"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->

<geobox-sidebar></geobox-sidebar>

<div id="geolocation"></div>


<script >

  var mapStyle = [
      {
          "featureType": "administrative",
          "elementType": "labels.text.fill",
          "stylers": [
              {
                  "color": "#444444"
              }
          ]
      },
      {
          "featureType": "landscape",
          "elementType": "all",
          "stylers": [
              {
                  "color": "#f2f2f2"
              }
          ]
      },
      {
          "featureType": "landscape",
          "elementType": "labels.text",
          "stylers": [
              {
                  "visibility": "on"
              },
              {
                  "hue": "#ff0000"
              }
          ]
      },
      {
          "featureType": "poi",
          "elementType": "all",
          "stylers": [
              {
                  "visibility": "off"
              }
          ]
      },
      {
          "featureType": "road",
          "elementType": "all",
          "stylers": [
              {
                  "saturation": -100
              },
              {
                  "lightness": 45
              }
          ]
      },
      {
          "featureType": "road.highway",
          "elementType": "all",
          "stylers": [
              {
                  "visibility": "simplified"
              }
          ]
      },
      {
          "featureType": "road.arterial",
          "elementType": "labels.icon",
          "stylers": [
              {
                  "visibility": "off"
              }
          ]
      },
      {
          "featureType": "transit",
          "elementType": "all",
          "stylers": [
              {
                  "visibility": "off"
              }
          ]
      },
      {
          "featureType": "water",
          "elementType": "all",
          "stylers": [
              {
                  "color": "#10ade4"
              },
              {
                  "visibility": "on"
              }
          ]
      }
  ];

    var handler = Gmaps.build('Google');
    handler.buildMap({ internal: {id: 'geolocation'}, provider:{
        zoom: 15,
        styles: mapStyle
    }}, function(){
        // be aware chrome >= 50 requires https for geolocation to work
        if(navigator.geolocation)
            navigator.geolocation.getCurrentPosition(displayOnMap);
    });

    function displayOnMap(position){
        var marker = handler.addMarker({
            lat: position.coords.latitude,
            lng: position.coords.longitude
        });
        handler.map.centerOn(marker);
    }

    // var sidebar = $('#sidebar').sidebar();

</script>

<style>
  #geolocation {
    height: 100%;
    width: 100%;
    left: 0;
    position: relative;
    top: 0;
  }
</style>